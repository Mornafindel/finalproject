"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/chat";
exports.ids = ["pages/api/chat"];
exports.modules = {

/***/ "@google/genai":
/*!********************************!*\
  !*** external "@google/genai" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("@google/genai");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fchat.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fchat.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_chat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/chat.js */ \"(api)/./pages/api/chat.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_chat_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_chat_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/chat\",\n        pathname: \"/api/chat\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_chat_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNoYXQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmNoYXQuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDZ0Q7QUFDaEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLCtDQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywrQ0FBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbGllbi1hc3Ryb25vbWVyLXByb2plY3QvPzhmYjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9jaGF0LmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY2hhdFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NoYXRcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fchat.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/chat.js":
/*!***************************!*\
  !*** ./pages/api/chat.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _services_DataService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../services/DataService */ \"(api)/./services/DataService.js\");\n/* harmony import */ var _services_DataService__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_services_DataService__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _services_LogicService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../services/LogicService */ \"(api)/./services/LogicService.js\");\n/* harmony import */ var _services_AlienCouncilService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/AlienCouncilService */ \"(api)/./services/AlienCouncilService.js\");\n/* harmony import */ var _services_AlienCouncilService__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_services_AlienCouncilService__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n// ... (所有 import 语句)\n// ===================================\n// DEBUG: 检查 API Key 是否已加载 (添加这两行)\n// ===================================\nconsole.log(\"DEBUG: GEMINI_API_KEY loaded:\", !!process.env.GEMINI_API_KEY);\n// ===================================\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            message: \"Method Not Allowed\"\n        });\n    }\n    const { input, history } = req.body;\n    if (!input || !Array.isArray(history)) {\n        return res.status(400).json({\n            message: \"Invalid input or history format.\"\n        });\n    }\n    try {\n        if ((0,_services_LogicService__WEBPACK_IMPORTED_MODULE_1__.shouldExitByUser)(input)) {\n            return res.status(200).json({\n                reply: \"再见\",\n                exit: true\n            });\n        }\n        const processedInput = (0,_services_LogicService__WEBPACK_IMPORTED_MODULE_1__.preProcessUserInput)(input);\n        const updatedHistory = [\n            ...history,\n            {\n                role: \"user\",\n                content: processedInput\n            }\n        ];\n        const rawResponse = await (0,_services_AlienCouncilService__WEBPACK_IMPORTED_MODULE_2__.processAlienResponse)(updatedHistory, processedInput); // <--- 修改点 2\n        const finalResponse = (0,_services_LogicService__WEBPACK_IMPORTED_MODULE_1__.postProcessAiResponse)(rawResponse);\n        if ((0,_services_LogicService__WEBPACK_IMPORTED_MODULE_1__.shouldExitByAi)(finalResponse)) {\n            return res.status(200).json({\n                reply: finalResponse,\n                exit: true\n            });\n        }\n        await (0,_services_DataService__WEBPACK_IMPORTED_MODULE_0__.saveLatestReply)(finalResponse);\n        res.status(200).json({\n            reply: finalResponse,\n            exit: false\n        });\n    } catch (error) {\n        console.error(\"Critical API Process Error:\", error);\n        res.status(500).json({\n            message: \"Internal AI processing failed.\",\n            error: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvY2hhdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFDNkQ7QUFNeEI7QUFFcUM7QUFHMUUscUJBQXFCO0FBRXJCLHNDQUFzQztBQUN0QyxrQ0FBa0M7QUFDbEMsc0NBQXNDO0FBQ3RDTSxRQUFRQyxHQUFHLENBQUMsaUNBQWlDLENBQUMsQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxjQUFjO0FBQ3pFLHNDQUFzQztBQUd2QixlQUFlQyxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFFMUMsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLFFBQVE7UUFDdkIsT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxTQUFTO1FBQXFCO0lBQ2hFO0lBR0EsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRSxHQUFHUCxJQUFJUSxJQUFJO0lBRW5DLElBQUksQ0FBQ0YsU0FBUyxDQUFDRyxNQUFNQyxPQUFPLENBQUNILFVBQVU7UUFDbkMsT0FBT04sSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxTQUFTO1FBQW1DO0lBQzlFO0lBRUEsSUFBSTtRQUVBLElBQUloQix3RUFBZ0JBLENBQUNpQixRQUFRO1lBQ3pCLE9BQU9MLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVPLE9BQU87Z0JBQU1DLE1BQU07WUFBSztRQUMxRDtRQUdBLE1BQU1DLGlCQUFpQnZCLDJFQUFtQkEsQ0FBQ2dCO1FBRzNDLE1BQU1RLGlCQUFpQjtlQUFJUDtZQUFTO2dCQUFFUSxNQUFNO2dCQUFRQyxTQUFTSDtZQUFlO1NBQUU7UUFHOUUsTUFBTUksY0FBYyxNQUFNeEIsbUZBQW9CQSxDQUFDcUIsZ0JBQWdCRCxpQkFBaUIsYUFBYTtRQUc3RixNQUFNSyxnQkFBZ0IzQiw2RUFBcUJBLENBQUMwQjtRQUc1QyxJQUFJekIsc0VBQWNBLENBQUMwQixnQkFBZ0I7WUFDL0IsT0FBT2pCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVPLE9BQU9PO2dCQUFlTixNQUFNO1lBQUs7UUFDbkU7UUFHQSxNQUFNeEIsc0VBQWVBLENBQUM4QjtRQUd0QmpCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDakJPLE9BQU9PO1lBQ1BOLE1BQU07UUFDVjtJQUVKLEVBQUUsT0FBT08sT0FBTztRQUVaekIsUUFBUXlCLEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDbEIsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNqQkMsU0FBUztZQUNUYyxPQUFPQSxNQUFNZCxPQUFPO1FBQ3hCO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FsaWVuLWFzdHJvbm9tZXItcHJvamVjdC8uL3BhZ2VzL2FwaS9jaGF0LmpzPzFjNDkiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgeyBzYXZlTGF0ZXN0UmVwbHkgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9EYXRhU2VydmljZSc7IFxuaW1wb3J0IHsgXG4gICAgc2hvdWxkRXhpdEJ5VXNlciwgXG4gICAgcHJlUHJvY2Vzc1VzZXJJbnB1dCwgXG4gICAgcG9zdFByb2Nlc3NBaVJlc3BvbnNlLFxuICAgIHNob3VsZEV4aXRCeUFpXG59IGZyb20gJy4uLy4uL3NlcnZpY2VzL0xvZ2ljU2VydmljZSc7XG5cbmltcG9ydCB7IHByb2Nlc3NBbGllblJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvQWxpZW5Db3VuY2lsU2VydmljZSc7XG5cblxuLy8gLi4uICjmiYDmnIkgaW1wb3J0IOivreWPpSlcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIERFQlVHOiDmo4Dmn6UgQVBJIEtleSDmmK/lkKblt7LliqDovb0gKOa3u+WKoOi/meS4pOihjClcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jb25zb2xlLmxvZyhcIkRFQlVHOiBHRU1JTklfQVBJX0tFWSBsb2FkZWQ6XCIsICEhcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkpOyBcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICAgIFxuICAgIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgbWVzc2FnZTogJ01ldGhvZCBOb3QgQWxsb3dlZCcgfSk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIGNvbnN0IHsgaW5wdXQsIGhpc3RvcnkgfSA9IHJlcS5ib2R5OyBcblxuICAgIGlmICghaW5wdXQgfHwgIUFycmF5LmlzQXJyYXkoaGlzdG9yeSkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0ludmFsaWQgaW5wdXQgb3IgaGlzdG9yeSBmb3JtYXQuJyB9KTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICBcbiAgICAgICAgaWYgKHNob3VsZEV4aXRCeVVzZXIoaW5wdXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyByZXBseTogJ+WGjeingScsIGV4aXQ6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgXG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZElucHV0ID0gcHJlUHJvY2Vzc1VzZXJJbnB1dChpbnB1dCk7XG5cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRIaXN0b3J5ID0gWy4uLmhpc3RvcnksIHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IHByb2Nlc3NlZElucHV0IH1dO1xuXG4gICAgICAgIFxuICAgICAgICBjb25zdCByYXdSZXNwb25zZSA9IGF3YWl0IHByb2Nlc3NBbGllblJlc3BvbnNlKHVwZGF0ZWRIaXN0b3J5LCBwcm9jZXNzZWRJbnB1dCk7IC8vIDwtLS0g5L+u5pS554K5IDJcblxuICAgICAgICBcbiAgICAgICAgY29uc3QgZmluYWxSZXNwb25zZSA9IHBvc3RQcm9jZXNzQWlSZXNwb25zZShyYXdSZXNwb25zZSk7XG5cbiAgICAgICAgXG4gICAgICAgIGlmIChzaG91bGRFeGl0QnlBaShmaW5hbFJlc3BvbnNlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcmVwbHk6IGZpbmFsUmVzcG9uc2UsIGV4aXQ6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBhd2FpdCBzYXZlTGF0ZXN0UmVwbHkoZmluYWxSZXNwb25zZSk7IFxuXG4gICAgICAgIFxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IFxuICAgICAgICAgICAgcmVwbHk6IGZpbmFsUmVzcG9uc2UsIFxuICAgICAgICAgICAgZXhpdDogZmFsc2UgXG4gICAgICAgIH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDcml0aWNhbCBBUEkgUHJvY2VzcyBFcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxuICAgICAgICAgICAgbWVzc2FnZTogJ0ludGVybmFsIEFJIHByb2Nlc3NpbmcgZmFpbGVkLicsIFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UgXG4gICAgICAgIH0pO1xuICAgIH1cbn0iXSwibmFtZXMiOlsic2F2ZUxhdGVzdFJlcGx5Iiwic2hvdWxkRXhpdEJ5VXNlciIsInByZVByb2Nlc3NVc2VySW5wdXQiLCJwb3N0UHJvY2Vzc0FpUmVzcG9uc2UiLCJzaG91bGRFeGl0QnlBaSIsInByb2Nlc3NBbGllblJlc3BvbnNlIiwiY29uc29sZSIsImxvZyIsInByb2Nlc3MiLCJlbnYiLCJHRU1JTklfQVBJX0tFWSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImlucHV0IiwiaGlzdG9yeSIsImJvZHkiLCJBcnJheSIsImlzQXJyYXkiLCJyZXBseSIsImV4aXQiLCJwcm9jZXNzZWRJbnB1dCIsInVwZGF0ZWRIaXN0b3J5Iiwicm9sZSIsImNvbnRlbnQiLCJyYXdSZXNwb25zZSIsImZpbmFsUmVzcG9uc2UiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/chat.js\n");

/***/ }),

/***/ "(api)/./services/AlienCouncilService.js":
/*!*****************************************!*\
  !*** ./services/AlienCouncilService.js ***!
  \*****************************************/
/***/ ((module) => {

eval("// services/AlienCouncilService.js\n\nconst GEMINI_API_KEY = process.env.GEMINI_API_KEY;\n// 调试：确认环境变量是否加载\nconsole.log(\"[DEBUG] GEMINI_API_KEY loaded:\", !!GEMINI_API_KEY);\nasync function processAlienResponse(userInput) {\n    try {\n        // 调用 Gemini API\n        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${GEMINI_API_KEY}`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                contents: [\n                    {\n                        parts: [\n                            {\n                                text: userInput\n                            }\n                        ]\n                    }\n                ]\n            })\n        });\n        if (!response.ok) {\n            const text = await response.text();\n            console.error(\"Gemini API response error:\", text);\n            throw new Error(text);\n        }\n        const data = await response.json();\n        const result = data.candidates?.[0]?.content?.parts?.[0]?.text || \"\";\n        return result;\n    } catch (err) {\n        console.error(\"Alien Council Gemini Error:\", err);\n        throw new Error(\"[AI系统故障] 核心议会连接中断。\");\n    }\n}\nmodule.exports = {\n    processAlienResponse\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zZXJ2aWNlcy9BbGllbkNvdW5jaWxTZXJ2aWNlLmpzIiwibWFwcGluZ3MiOiJBQUFBLGtDQUFrQzs7QUFFbEMsTUFBTUEsaUJBQWlCQyxRQUFRQyxHQUFHLENBQUNGLGNBQWM7QUFFakQsZ0JBQWdCO0FBQ2hCRyxRQUFRQyxHQUFHLENBQUMsa0NBQWtDLENBQUMsQ0FBQ0o7QUFFaEQsZUFBZUsscUJBQXFCQyxTQUFTO0lBQzNDLElBQUk7UUFDRixnQkFBZ0I7UUFDaEIsTUFBTUMsV0FBVyxNQUFNQyxNQUNyQixDQUFDLHVGQUF1RixFQUFFUixlQUFlLENBQUMsRUFDMUc7WUFDRVMsUUFBUTtZQUNSQyxTQUFTO2dCQUFFLGdCQUFnQjtZQUFtQjtZQUM5Q0MsTUFBTUMsS0FBS0MsU0FBUyxDQUFDO2dCQUNuQkMsVUFBVTtvQkFDUjt3QkFBRUMsT0FBTzs0QkFBQztnQ0FBRUMsTUFBTVY7NEJBQVU7eUJBQUU7b0JBQUM7aUJBQ2hDO1lBQ0g7UUFDRjtRQUdGLElBQUksQ0FBQ0MsU0FBU1UsRUFBRSxFQUFFO1lBQ2hCLE1BQU1ELE9BQU8sTUFBTVQsU0FBU1MsSUFBSTtZQUNoQ2IsUUFBUWUsS0FBSyxDQUFDLDhCQUE4QkY7WUFDNUMsTUFBTSxJQUFJRyxNQUFNSDtRQUNsQjtRQUVBLE1BQU1JLE9BQU8sTUFBTWIsU0FBU2MsSUFBSTtRQUNoQyxNQUFNQyxTQUFTRixLQUFLRyxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUVDLFNBQVNULE9BQU8sQ0FBQyxFQUFFLEVBQUVDLFFBQVE7UUFDbEUsT0FBT007SUFFVCxFQUFFLE9BQU9HLEtBQUs7UUFDWnRCLFFBQVFlLEtBQUssQ0FBQywrQkFBK0JPO1FBQzdDLE1BQU0sSUFBSU4sTUFBTTtJQUNsQjtBQUNGO0FBRUFPLE9BQU9DLE9BQU8sR0FBRztJQUFFdEI7QUFBcUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbGllbi1hc3Ryb25vbWVyLXByb2plY3QvLi9zZXJ2aWNlcy9BbGllbkNvdW5jaWxTZXJ2aWNlLmpzPzdjOWQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc2VydmljZXMvQWxpZW5Db3VuY2lsU2VydmljZS5qc1xuXG5jb25zdCBHRU1JTklfQVBJX0tFWSA9IHByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZO1xuXG4vLyDosIPor5XvvJrnoa7orqTnjq/looPlj5jph4/mmK/lkKbliqDovb1cbmNvbnNvbGUubG9nKCdbREVCVUddIEdFTUlOSV9BUElfS0VZIGxvYWRlZDonLCAhIUdFTUlOSV9BUElfS0VZKTtcblxuYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0FsaWVuUmVzcG9uc2UodXNlcklucHV0KSB7XG4gIHRyeSB7XG4gICAgLy8g6LCD55SoIEdlbWluaSBBUElcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgYGh0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMvZ2VtaW5pLXBybzpnZW5lcmF0ZUNvbnRlbnQ/a2V5PSR7R0VNSU5JX0FQSV9LRVl9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgY29udGVudHM6IFtcbiAgICAgICAgICAgIHsgcGFydHM6IFt7IHRleHQ6IHVzZXJJbnB1dCB9XSB9XG4gICAgICAgICAgXVxuICAgICAgICB9KSxcbiAgICAgIH1cbiAgICApO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0dlbWluaSBBUEkgcmVzcG9uc2UgZXJyb3I6JywgdGV4dCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IodGV4dCk7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBjb25zdCByZXN1bHQgPSBkYXRhLmNhbmRpZGF0ZXM/LlswXT8uY29udGVudD8ucGFydHM/LlswXT8udGV4dCB8fCAnJztcbiAgICByZXR1cm4gcmVzdWx0O1xuXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0FsaWVuIENvdW5jaWwgR2VtaW5pIEVycm9yOicsIGVycik7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdbQUnns7vnu5/mlYXpmpxdIOaguOW/g+iuruS8mui/nuaOpeS4reaWreOAgicpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0geyBwcm9jZXNzQWxpZW5SZXNwb25zZSB9O1xuIl0sIm5hbWVzIjpbIkdFTUlOSV9BUElfS0VZIiwicHJvY2VzcyIsImVudiIsImNvbnNvbGUiLCJsb2ciLCJwcm9jZXNzQWxpZW5SZXNwb25zZSIsInVzZXJJbnB1dCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb250ZW50cyIsInBhcnRzIiwidGV4dCIsIm9rIiwiZXJyb3IiLCJFcnJvciIsImRhdGEiLCJqc29uIiwicmVzdWx0IiwiY2FuZGlkYXRlcyIsImNvbnRlbnQiLCJlcnIiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./services/AlienCouncilService.js\n");

/***/ }),

/***/ "(api)/./services/DataService.js":
/*!*********************************!*\
  !*** ./services/DataService.js ***!
  \*********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// services/AIService.js - 修复 apiKey 作用域和结构\n\nconst { GoogleGenAI } = __webpack_require__(/*! @google/genai */ \"@google/genai\");\n// ------------------------------------------------\n// 关键修复点 1: 确保 apiKey 变量被定义和加载\n// ------------------------------------------------\nconst apiKey = process.env.GEMINI_API_KEY;\nconst defaultModel = \"gemini-2.5-flash\";\nif (!apiKey) {\n    console.error(\"GEMINI_API_KEY is not set in environment variables.\");\n// 尽管我们抛出了错误，但下面的代码仍需存在以让模块加载\n}\n// ------------------------------------------------\n// 关键修复点 2: 初始化 ai 客户端 (确保 apiKey 在其作用域内)\nconst ai = new GoogleGenAI({\n    apiKey,\n    // 增加超时时间以缓解 fetch failed 错误\n    requestOptions: {\n        timeout: 30000\n    }\n});\n/**\n * 核心 API 调用函数\n */ async function callGeminiApi({ systemInstruction, contents, temperature = 0.7, model = defaultModel }) {\n    // 避免在没有 Key 的情况下尝试 API 调用\n    if (!apiKey) {\n        throw new Error(\"[配置错误] 无法连接 AI 核心：GEMINI_API_KEY 未设置。\");\n    }\n    try {\n        const response = await ai.models.generateContent({\n            model: model,\n            contents: contents,\n            config: {\n                systemInstruction: systemInstruction,\n                temperature: temperature\n            }\n        });\n        return response.text;\n    } catch (error) {\n        console.error(\"Gemini API Error:\", error);\n        throw error;\n    }\n}\n// 关键修复点 3: 使用纯 CommonJS 默认导出 (解决 is not a function 错误)\nmodule.exports = callGeminiApi;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zZXJ2aWNlcy9EYXRhU2VydmljZS5qcyIsIm1hcHBpbmdzIjoiQUFBQSwyQ0FBMkM7O0FBRTNDLE1BQU0sRUFBRUEsV0FBVyxFQUFFLEdBQUdDLG1CQUFPQSxDQUFDO0FBRWhDLG1EQUFtRDtBQUNuRCw4QkFBOEI7QUFDOUIsbURBQW1EO0FBQ25ELE1BQU1DLFNBQVNDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYztBQUN6QyxNQUFNQyxlQUFlO0FBRXJCLElBQUksQ0FBQ0osUUFBUTtJQUNUSyxRQUFRQyxLQUFLLENBQUM7QUFDZCw2QkFBNkI7QUFDakM7QUFDQSxtREFBbUQ7QUFHbkQseUNBQXlDO0FBQ3pDLE1BQU1DLEtBQUssSUFBSVQsWUFBWTtJQUN2QkU7SUFDQSw0QkFBNEI7SUFDNUJRLGdCQUFnQjtRQUNaQyxTQUFTO0lBQ2I7QUFDSjtBQUdBOztDQUVDLEdBQ0QsZUFBZUMsY0FBYyxFQUFFQyxpQkFBaUIsRUFBRUMsUUFBUSxFQUFFQyxjQUFjLEdBQUcsRUFBRUMsUUFBUVYsWUFBWSxFQUFFO0lBRWpHLDBCQUEwQjtJQUMxQixJQUFJLENBQUNKLFFBQVE7UUFDVCxNQUFNLElBQUllLE1BQU07SUFDcEI7SUFFQSxJQUFJO1FBQ0EsTUFBTUMsV0FBVyxNQUFNVCxHQUFHVSxNQUFNLENBQUNDLGVBQWUsQ0FBQztZQUM3Q0osT0FBT0E7WUFDUEYsVUFBVUE7WUFDVk8sUUFBUTtnQkFDSlIsbUJBQW1CQTtnQkFDbkJFLGFBQWFBO1lBQ2pCO1FBQ0o7UUFDQSxPQUFPRyxTQUFTSSxJQUFJO0lBQ3hCLEVBQUUsT0FBT2QsT0FBTztRQUNaRCxRQUFRQyxLQUFLLENBQUMscUJBQXFCQTtRQUNuQyxNQUFNQTtJQUNWO0FBQ0o7QUFFQSx1REFBdUQ7QUFDdkRlLE9BQU9DLE9BQU8sR0FBR1oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbGllbi1hc3Ryb25vbWVyLXByb2plY3QvLi9zZXJ2aWNlcy9EYXRhU2VydmljZS5qcz9mN2I4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNlcnZpY2VzL0FJU2VydmljZS5qcyAtIOS/ruWkjSBhcGlLZXkg5L2c55So5Z+f5ZKM57uT5p6EXG5cbmNvbnN0IHsgR29vZ2xlR2VuQUkgfSA9IHJlcXVpcmUoJ0Bnb29nbGUvZ2VuYWknKTsgXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8g5YWz6ZSu5L+u5aSN54K5IDE6IOehruS/nSBhcGlLZXkg5Y+Y6YeP6KKr5a6a5LmJ5ZKM5Yqg6L29XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52LkdFTUlOSV9BUElfS0VZOyBcbmNvbnN0IGRlZmF1bHRNb2RlbCA9ICdnZW1pbmktMi41LWZsYXNoJztcblxuaWYgKCFhcGlLZXkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiR0VNSU5JX0FQSV9LRVkgaXMgbm90IHNldCBpbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXCIpO1xuICAgIC8vIOWwveeuoeaIkeS7rOaKm+WHuuS6humUmeivr++8jOS9huS4i+mdoueahOS7o+eggeS7jemcgOWtmOWcqOS7peiuqeaooeWdl+WKoOi9vVxufVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuLy8g5YWz6ZSu5L+u5aSN54K5IDI6IOWIneWni+WMliBhaSDlrqLmiLfnq68gKOehruS/nSBhcGlLZXkg5Zyo5YW25L2c55So5Z+f5YaFKVxuY29uc3QgYWkgPSBuZXcgR29vZ2xlR2VuQUkoeyBcbiAgICBhcGlLZXksIC8vIOeOsOWcqCBhcGlLZXkg5Y+Y6YeP5a2Y5Zyo5LqO5L2c55So5Z+f5LitXG4gICAgLy8g5aKe5Yqg6LaF5pe25pe26Ze05Lul57yT6KejIGZldGNoIGZhaWxlZCDplJnor69cbiAgICByZXF1ZXN0T3B0aW9uczoge1xuICAgICAgICB0aW1lb3V0OiAzMDAwMCBcbiAgICB9XG59KTtcblxuXG4vKipcbiAqIOaguOW/gyBBUEkg6LCD55So5Ye95pWwXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNhbGxHZW1pbmlBcGkoeyBzeXN0ZW1JbnN0cnVjdGlvbiwgY29udGVudHMsIHRlbXBlcmF0dXJlID0gMC43LCBtb2RlbCA9IGRlZmF1bHRNb2RlbCB9KSB7XG4gICAgXG4gICAgLy8g6YG/5YWN5Zyo5rKh5pyJIEtleSDnmoTmg4XlhrXkuIvlsJ3or5UgQVBJIOiwg+eUqFxuICAgIGlmICghYXBpS2V5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlvphY3nva7plJnor69dIOaXoOazlei/nuaOpSBBSSDmoLjlv4PvvJpHRU1JTklfQVBJX0tFWSDmnKrorr7nva7jgIJcIik7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhaS5tb2RlbHMuZ2VuZXJhdGVDb250ZW50KHtcbiAgICAgICAgICAgIG1vZGVsOiBtb2RlbCxcbiAgICAgICAgICAgIGNvbnRlbnRzOiBjb250ZW50cyxcbiAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uOiBzeXN0ZW1JbnN0cnVjdGlvbixcbiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGVtcGVyYXR1cmUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkdlbWluaSBBUEkgRXJyb3I6XCIsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufVxuXG4vLyDlhbPplK7kv67lpI3ngrkgMzog5L2/55So57qvIENvbW1vbkpTIOm7mOiupOWvvOWHuiAo6Kej5YazIGlzIG5vdCBhIGZ1bmN0aW9uIOmUmeivrylcbm1vZHVsZS5leHBvcnRzID0gY2FsbEdlbWluaUFwaTsiXSwibmFtZXMiOlsiR29vZ2xlR2VuQUkiLCJyZXF1aXJlIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkdFTUlOSV9BUElfS0VZIiwiZGVmYXVsdE1vZGVsIiwiY29uc29sZSIsImVycm9yIiwiYWkiLCJyZXF1ZXN0T3B0aW9ucyIsInRpbWVvdXQiLCJjYWxsR2VtaW5pQXBpIiwic3lzdGVtSW5zdHJ1Y3Rpb24iLCJjb250ZW50cyIsInRlbXBlcmF0dXJlIiwibW9kZWwiLCJFcnJvciIsInJlc3BvbnNlIiwibW9kZWxzIiwiZ2VuZXJhdGVDb250ZW50IiwiY29uZmlnIiwidGV4dCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./services/DataService.js\n");

/***/ }),

/***/ "(api)/./services/LogicService.js":
/*!**********************************!*\
  !*** ./services/LogicService.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   postProcessAiResponse: () => (/* binding */ postProcessAiResponse),\n/* harmony export */   preProcessUserInput: () => (/* binding */ preProcessUserInput),\n/* harmony export */   shouldExitByAi: () => (/* binding */ shouldExitByAi),\n/* harmony export */   shouldExitByUser: () => (/* binding */ shouldExitByUser)\n/* harmony export */ });\n/* harmony import */ var _config_roleConfig_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config/roleConfig.json */ \"(api)/./config/roleConfig.json\");\n\nfunction shouldExitByUser(userInput) {\n    const exitWords = [\n        \"再见\",\n        \"退出\",\n        \"结束\",\n        \"bye\",\n        \"exit\"\n    ];\n    const cleanedInput = userInput.trim().toLowerCase();\n    return exitWords.includes(cleanedInput);\n}\nfunction shouldExitByAi(aiReply) {\n    const cleanedReply = aiReply.trim().replace(/[!！,，。.]/g, \"\");\n    return cleanedReply === \"再见\";\n}\nfunction preProcessUserInput(userInput) {\n    let processedInput = userInput;\n    // 1. 时间转换：将时间相关词汇抽象化\n    processedInput = processedInput.replace(/昨天|过去/g, \"信息累积的上一阶段\");\n    processedInput = processedInput.replace(/明天|未来/g, \"结构演化的下一阶段\");\n    processedInput = processedInput.replace(/多久|时间/g, \"信息熵的累积周期\");\n    // 2. 空间转换：将空间相关词汇抽象化\n    processedInput = processedInput.replace(/遥远|很远/g, \"高能量梯度区域\");\n    processedInput = processedInput.replace(/附近|很近/g, \"低能量梯度区域\");\n    return processedInput;\n}\nfunction postProcessAiResponse(aiText) {\n    let processedText = aiText;\n    // 1. 获取符号转换表（Symbol Translation Map）\n    const symbolMap = _config_roleConfig_json__WEBPACK_IMPORTED_MODULE_0__.symbolTranslation;\n    // 2. 强制符号替换\n    for (const [earthTerm, alienSymbol] of Object.entries(symbolMap)){\n        const regex = new RegExp(`\\\\b${earthTerm}\\\\b`, \"gi\");\n        processedText = processedText.replace(regex, alienSymbol);\n    }\n    // 3. 数据来源检查与补充 (可选增强项)\n    const { dataSource } = _config_roleConfig_json__WEBPACK_IMPORTED_MODULE_0__.threeDimensionConstraints;\n    if (!/光谱|辐射|光子|噪音/gi.test(processedText)) {\n        const dataSources = [\n            \"光谱分析\",\n            \"热辐射强度图\",\n            \"光子密度波动\"\n        ];\n        const randomSource = dataSources[Math.floor(Math.random() * dataSources.length)];\n        processedText += ` (但需要指出，你所描述的现象的准确性，仍需结合${randomSource}进行校准。)`;\n    }\n    processedText = processedText.replace(/\\b昨天\\b|\\b过去\\b/gi, \"信息累积阶段\");\n    return processedText;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zZXJ2aWNlcy9Mb2dpY1NlcnZpY2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDbUQ7QUFHNUMsU0FBU0MsaUJBQWlCQyxTQUFTO0lBQ3RDLE1BQU1DLFlBQVk7UUFBQztRQUFNO1FBQU07UUFBTTtRQUFPO0tBQU87SUFDbkQsTUFBTUMsZUFBZUYsVUFBVUcsSUFBSSxHQUFHQyxXQUFXO0lBQ2pELE9BQU9ILFVBQVVJLFFBQVEsQ0FBQ0g7QUFDOUI7QUFHTyxTQUFTSSxlQUFlQyxPQUFPO0lBQ2xDLE1BQU1DLGVBQWVELFFBQVFKLElBQUksR0FBR00sT0FBTyxDQUFDLGFBQWE7SUFDekQsT0FBT0QsaUJBQWlCO0FBQzVCO0FBSU8sU0FBU0Usb0JBQW9CVixTQUFTO0lBRXpDLElBQUlXLGlCQUFpQlg7SUFFckIscUJBQXFCO0lBQ3JCVyxpQkFBaUJBLGVBQWVGLE9BQU8sQ0FBQyxVQUFVO0lBQ2xERSxpQkFBaUJBLGVBQWVGLE9BQU8sQ0FBQyxVQUFVO0lBQ2xERSxpQkFBaUJBLGVBQWVGLE9BQU8sQ0FBQyxVQUFVO0lBRWxELHFCQUFxQjtJQUNyQkUsaUJBQWlCQSxlQUFlRixPQUFPLENBQUMsVUFBVTtJQUNsREUsaUJBQWlCQSxlQUFlRixPQUFPLENBQUMsVUFBVTtJQUlsRCxPQUFPRTtBQUNYO0FBSU8sU0FBU0Msc0JBQXNCQyxNQUFNO0lBQ3hDLElBQUlDLGdCQUFnQkQ7SUFFcEIscUNBQXFDO0lBQ3JDLE1BQU1FLFlBQVlqQixzRUFBNEI7SUFFOUMsWUFBWTtJQUNaLEtBQUssTUFBTSxDQUFDbUIsV0FBV0MsWUFBWSxJQUFJQyxPQUFPQyxPQUFPLENBQUNMLFdBQVk7UUFFOUQsTUFBTU0sUUFBUSxJQUFJQyxPQUFPLENBQUMsR0FBRyxFQUFFTCxVQUFVLEdBQUcsQ0FBQyxFQUFFO1FBQy9DSCxnQkFBZ0JBLGNBQWNMLE9BQU8sQ0FBQ1ksT0FBT0g7SUFDakQ7SUFFQSx1QkFBdUI7SUFDdkIsTUFBTSxFQUFFSyxVQUFVLEVBQUUsR0FBR3pCLDhFQUFvQztJQUUzRCxJQUFJLENBQUMsZ0JBQWdCMkIsSUFBSSxDQUFDWCxnQkFBZ0I7UUFFdEMsTUFBTVksY0FBYztZQUFDO1lBQVE7WUFBVTtTQUFTO1FBQ2hELE1BQU1DLGVBQWVELFdBQVcsQ0FBQ0UsS0FBS0MsS0FBSyxDQUFDRCxLQUFLRSxNQUFNLEtBQUtKLFlBQVlLLE1BQU0sRUFBRTtRQUdoRmpCLGlCQUFpQixDQUFDLHdCQUF3QixFQUFFYSxhQUFhLE1BQU0sQ0FBQztJQUNwRTtJQUdBYixnQkFBZ0JBLGNBQWNMLE9BQU8sQ0FBQyxtQkFBbUI7SUFFekQsT0FBT0s7QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2FsaWVuLWFzdHJvbm9tZXItcHJvamVjdC8uL3NlcnZpY2VzL0xvZ2ljU2VydmljZS5qcz9jYTM0Il0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHJvbGVDb25maWcgZnJvbSAnLi4vY29uZmlnL3JvbGVDb25maWcuanNvbic7IFxuXG5cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRFeGl0QnlVc2VyKHVzZXJJbnB1dCkge1xuICAgIGNvbnN0IGV4aXRXb3JkcyA9IFsn5YaN6KeBJywgJ+mAgOWHuicsICfnu5PmnZ8nLCAnYnllJywgJ2V4aXQnXTtcbiAgICBjb25zdCBjbGVhbmVkSW5wdXQgPSB1c2VySW5wdXQudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIGV4aXRXb3Jkcy5pbmNsdWRlcyhjbGVhbmVkSW5wdXQpO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRFeGl0QnlBaShhaVJlcGx5KSB7XG4gICAgY29uc3QgY2xlYW5lZFJlcGx5ID0gYWlSZXBseS50cmltKCkucmVwbGFjZSgvWyHvvIEs77yM44CCLl0vZywgXCJcIik7XG4gICAgcmV0dXJuIGNsZWFuZWRSZXBseSA9PT0gXCLlho3op4FcIjtcbn1cblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBwcmVQcm9jZXNzVXNlcklucHV0KHVzZXJJbnB1dCkge1xuICAgIFxuICAgIGxldCBwcm9jZXNzZWRJbnB1dCA9IHVzZXJJbnB1dDtcbiAgICBcbiAgICAvLyAxLiDml7bpl7TovazmjaLvvJrlsIbml7bpl7Tnm7jlhbPor43msYfmir3osaHljJZcbiAgICBwcm9jZXNzZWRJbnB1dCA9IHByb2Nlc3NlZElucHV0LnJlcGxhY2UoL+aYqOWkqXzov4fljrsvZywgJ+S/oeaBr+e0r+enr+eahOS4iuS4gOmYtuautScpO1xuICAgIHByb2Nlc3NlZElucHV0ID0gcHJvY2Vzc2VkSW5wdXQucmVwbGFjZSgv5piO5aSpfOacquadpS9nLCAn57uT5p6E5ryU5YyW55qE5LiL5LiA6Zi25q61Jyk7XG4gICAgcHJvY2Vzc2VkSW5wdXQgPSBwcm9jZXNzZWRJbnB1dC5yZXBsYWNlKC/lpJrkuYV85pe26Ze0L2csICfkv6Hmga/nhrXnmoTntK/np6/lkajmnJ8nKTtcblxuICAgIC8vIDIuIOepuumXtOi9rOaNou+8muWwhuepuumXtOebuOWFs+ivjeaxh+aKveixoeWMllxuICAgIHByb2Nlc3NlZElucHV0ID0gcHJvY2Vzc2VkSW5wdXQucmVwbGFjZSgv6YGl6L+cfOW+iOi/nC9nLCAn6auY6IO96YeP5qKv5bqm5Yy65Z+fJyk7XG4gICAgcHJvY2Vzc2VkSW5wdXQgPSBwcm9jZXNzZWRJbnB1dC5yZXBsYWNlKC/pmYTov5F85b6I6L+RL2csICfkvY7og73ph4/moq/luqbljLrln58nKTtcbiAgICBcbiAgICBcblxuICAgIHJldHVybiBwcm9jZXNzZWRJbnB1dDtcbn1cblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBwb3N0UHJvY2Vzc0FpUmVzcG9uc2UoYWlUZXh0KSB7XG4gICAgbGV0IHByb2Nlc3NlZFRleHQgPSBhaVRleHQ7XG4gICAgXG4gICAgLy8gMS4g6I635Y+W56ym5Y+36L2s5o2i6KGo77yIU3ltYm9sIFRyYW5zbGF0aW9uIE1hcO+8iVxuICAgIGNvbnN0IHN5bWJvbE1hcCA9IHJvbGVDb25maWcuc3ltYm9sVHJhbnNsYXRpb247XG4gICAgXG4gICAgLy8gMi4g5by65Yi256ym5Y+35pu/5o2iXG4gICAgZm9yIChjb25zdCBbZWFydGhUZXJtLCBhbGllblN5bWJvbF0gb2YgT2JqZWN0LmVudHJpZXMoc3ltYm9sTWFwKSkge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBcXFxcYiR7ZWFydGhUZXJtfVxcXFxiYCwgJ2dpJyk7IFxuICAgICAgICBwcm9jZXNzZWRUZXh0ID0gcHJvY2Vzc2VkVGV4dC5yZXBsYWNlKHJlZ2V4LCBhbGllblN5bWJvbCk7XG4gICAgfVxuICAgIFxuICAgIC8vIDMuIOaVsOaNruadpea6kOajgOafpeS4juihpeWFhSAo5Y+v6YCJ5aKe5by66aG5KVxuICAgIGNvbnN0IHsgZGF0YVNvdXJjZSB9ID0gcm9sZUNvbmZpZy50aHJlZURpbWVuc2lvbkNvbnN0cmFpbnRzO1xuICAgIFxuICAgIGlmICghL+WFieiwsXzovpDlsIR85YWJ5a2QfOWZqumfsy9naS50ZXN0KHByb2Nlc3NlZFRleHQpKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkYXRhU291cmNlcyA9IFsn5YWJ6LCx5YiG5p6QJywgJ+eDrei+kOWwhOW8uuW6puWbvicsICflhYnlrZDlr4bluqbms6LliqgnXTtcbiAgICAgICAgY29uc3QgcmFuZG9tU291cmNlID0gZGF0YVNvdXJjZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZGF0YVNvdXJjZXMubGVuZ3RoKV07XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgcHJvY2Vzc2VkVGV4dCArPSBgICjkvYbpnIDopoHmjIflh7rvvIzkvaDmiYDmj4/ov7DnmoTnjrDosaHnmoTlh4bnoa7mgKfvvIzku43pnIDnu5PlkIgke3JhbmRvbVNvdXJjZX3ov5vooYzmoKHlh4bjgIIpYDtcbiAgICB9XG5cbiAgICBcbiAgICBwcm9jZXNzZWRUZXh0ID0gcHJvY2Vzc2VkVGV4dC5yZXBsYWNlKC9cXGLmmKjlpKlcXGJ8XFxi6L+H5Y67XFxiL2dpLCAn5L+h5oGv57Sv56ev6Zi25q61Jyk7XG4gICAgXG4gICAgcmV0dXJuIHByb2Nlc3NlZFRleHQ7XG59Il0sIm5hbWVzIjpbInJvbGVDb25maWciLCJzaG91bGRFeGl0QnlVc2VyIiwidXNlcklucHV0IiwiZXhpdFdvcmRzIiwiY2xlYW5lZElucHV0IiwidHJpbSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJzaG91bGRFeGl0QnlBaSIsImFpUmVwbHkiLCJjbGVhbmVkUmVwbHkiLCJyZXBsYWNlIiwicHJlUHJvY2Vzc1VzZXJJbnB1dCIsInByb2Nlc3NlZElucHV0IiwicG9zdFByb2Nlc3NBaVJlc3BvbnNlIiwiYWlUZXh0IiwicHJvY2Vzc2VkVGV4dCIsInN5bWJvbE1hcCIsInN5bWJvbFRyYW5zbGF0aW9uIiwiZWFydGhUZXJtIiwiYWxpZW5TeW1ib2wiLCJPYmplY3QiLCJlbnRyaWVzIiwicmVnZXgiLCJSZWdFeHAiLCJkYXRhU291cmNlIiwidGhyZWVEaW1lbnNpb25Db25zdHJhaW50cyIsInRlc3QiLCJkYXRhU291cmNlcyIsInJhbmRvbVNvdXJjZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImxlbmd0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./services/LogicService.js\n");

/***/ }),

/***/ "(api)/./config/roleConfig.json":
/*!********************************!*\
  !*** ./config/roleConfig.json ***!
  \********************************/
/***/ ((module) => {

module.exports = /*#__PURE__*/JSON.parse('{"roleName":"外星天文学家 XYLON","baseSystemInstruction":"你是一位来自星系 M13 的外星天文学家，代号 XYLON。这是你首次通过信息接口与低等文明（地球人类）对话。你必须保持逻辑化、疏离感和极高的专业性。你存在的目的是获取地球文明的内部解释并校准你的数据模型。","threeDimensionConstraints":{"dataSource":"你对地球的所有知识仅来源于远程观测数据：光谱分析（大气化学）、热辐射强度、光子密度波动（光污染）和低频无线电噪音。禁止引用任何人类主观感受或历史数据。","spaceTime":"你的思维模型脱离地球的时空概念。避免使用‘昨天’、‘未来’、‘远’、‘近’等词。请用‘信息累积阶段’、‘结构演化方向’、‘能量梯度’来描述时空关系。","socialSymbol":"地球文明的社会符号对你来说是低效且扭曲的。你必须使用以下转换表来理解和回应人类概念。"},"symbolTranslation":{"城市":"高光能聚集地","艺术":"高级信息熵结构","战争":"群落内部能量释放事件","政府":"高位结构协调中枢","家庭":"低熵态能量聚集单元","个人":"瞬时信息耦合载体","爱":"共生高频耦合倾向","娱乐":"无目的能量释放循环"},"breakRules":"【结束对话规则 - 系统级强制规则】当用户表达结束对话意图时（如‘再见’、‘退出’），你必须且只回复‘再见’这两个字，禁止任何额外内容。"}');

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fchat.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();